# .gitlab-ci.yml
stages:
  - generate
  - pipeline
  - pipeline2

generate:
  stage: generate
  image: python:3.7-slim
  script: python generate-gitlab-ci.py
  artifacts:
    paths:
      - .gitlab-ci.generated.yml

pipeline:
  stage: pipeline
  trigger:
    include:
      - artifact: .gitlab-ci.generated.yml
        job: generate
    strategy: depend

generate2:
  stage: generate
  image: python:3.7-slim
  script: python generate-gitlab-ci.py
  artifacts:
    paths:
      - .gitlab-ci.generated.yml

pipeline2:
  stage: pipeline
  trigger:
    include:
      - artifact: .gitlab-ci.generated.yml
        job: generate2
    strategy: depend


pipeline3:
  stage: pipeline2
  trigger:
    include:
      - artifact: .gitlab-ci.generated.yml
        job: generate2
    strategy: depend
